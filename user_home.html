<!DOCTYPE html>
<html>
<head>
    <title>Welcome Back</title>
    <style>


        /*navigation bar*/
        nav {
            background-color: #21205F;
            color: #fff;
            display: flex;
            justify-content: space-between;
            padding: 10px;
        }

            nav a {
                color: #fff;
                text-decoration: none;
                margin: 0 auto;
            }

        /* center image */
        .image-container {
            display: flex;
            justify-content: center;
        }

            .image-container img {
                max-width: 100%;
                max-height: 100%;
            }
    </style>
</head>
<body onload="loadOrder()">
    <nav>
        <a onclick="home()" href="http://127.0.0.1:8000/">Home</a>
    </nav>
    <h2 id="welcome-text" style="text-align: center;"></h2>
    <p id="weight-text" style="text-align: center;"></p>
    <p id="shipped-text" style="text-align: center;"></p>
    <p id="delivery-text" style="text-align: center;"></p>

    <!-- wrap image inside container to center -->
    <div class="image-container">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTzz28ogZF-sxR-p-gZk6giNzJ6q2lVgwNI_l08duoTvs4ytmN4hbT2mjHhpUhRzE6Us1Y&usqp=CAU">
    </div>
</body>
<script>
    function loadOrder() {
        var email = localStorage.getItem("email");
        var weight = localStorage.getItem("weight");
        const date = new Date(); 

        let year = date.getFullYear(); 
        let month = date.getMonth(); 
        let day = date.getDate(); 

        document.getElementById('welcome-text').innerHTML = "Welcome back, " + email;
        document.getElementById('weight-text').innerHTML = "<strong>Package weight: </strong>" + weight;
        document.getElementById('shipped-text').innerHTML = "<strong>Date shipped: </strong> " + month + '/' + day + '/' + year;
        
        var addDate = localStorage.getItem("days");

        if (parseInt(day) + parseInt(addDate) > 30) {
            month = date.getMonth() + 1;
            day = parseInt(day - 30) + parseInt(addDate);
        } else {
            day = parseInt(day) + parseInt(addDate);
        }

        document.getElementById('delivery-text').innerHTML = "<strong>Estimated delivery date: </strong>" + month + '/' + day + '/' + year;
    }

    async function home() {
        await fetch('http://127.0.0.1:8000/', {
            method: "GET"
        })
    }
</script>
</html>
